<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>Phalcon\Websocket\Server | PhalconTool</title>

            <link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../../css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="../../css/sami.css">
        <script src="../../js/jquery-1.11.1.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/typeahead.min.js"></script>
        <script src="../../sami.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    
    
    </head>

    <body id="class" data-name="class:Phalcon_Websocket_Server" data-root-path="../../">
            <div id="content">
        <div id="left-column">
                <div id="control-panel">
                <script>
            $('option[data-version="'+window.projectVersion+'"]').prop('selected', true);
        </script>
        <form id="search-form" action="../../search.html" method="GET">
            <span class="glyphicon glyphicon-search"></span>
            <input name="search"
                   class="typeahead form-control"
                   type="search"
                   placeholder="Search">
        </form>
    </div>

                <div id="api-tree"></div>

        </div>
        <div id="right-column">
                <nav id="site-nav" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-elements">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../index.html">PhalconTool</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-elements">
                <ul class="nav navbar-nav">
                    <li><a href="../../classes.html">Classes</a></li>
                                            <li><a href="../../namespaces.html">Namespaces</a></li>
                                        <li><a href="../../interfaces.html">Interfaces</a></li>
                    <li><a href="../../traits.html">Traits</a></li>
                    <li><a href="../../doc-index.html">Index</a></li>
                    <li><a href="../../search.html">Search</a></li>
                </ul>
            </div>
        </div>
    </nav>

                        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                        <li><a href="../../Phalcon.html">Phalcon</a></li><li class="backslash">\</li><li><a href="../../Phalcon/Websocket.html">Websocket</a></li><li class="backslash">\</li><li>Server</li>
            </ol>
        </div>
                <div id="page-content">
                
    <div class="page-header">
        <h1>
            Server
                
        </h1>
    </div>

    <p>abstract     class
    <strong>Server</strong>
</p>

        
    

            <div class="description">
            <p>Websocket server supporting https</p>                                </div>
    
    
    
            <h2>Properties</h2>

            <table class="table table-condensed">
                    <tr>
                <td class="type" id="property_userClass">
                                        protected                                        string
                </td>
                <td>$userClass</td>
                <td class="last">User class name</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_maxBufferSize">
                                        protected                                        integer
                </td>
                <td>$maxBufferSize</td>
                <td class="last">Maximum buffer size</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_master">
                                        protected                                        socket_ressource
                </td>
                <td>$master</td>
                <td class="last">Server socket</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_sockets">
                                        protected                                        array
                </td>
                <td>$sockets</td>
                <td class="last">Sockets list indexed by id</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_users">
                                        protected                                        array
                </td>
                <td>$users</td>
                <td class="last">Users list indexed by id</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_heldMessages">
                                        protected                                        array
                </td>
                <td>$heldMessages</td>
                <td class="last">Message waiting gor their user handshake</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_rooms">
                                        protected                                        array
                </td>
                <td>$rooms</td>
                <td class="last">Rooms list indexed by name</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_interactive">
                                        protected                                        boolean
                </td>
                <td>$interactive</td>
                <td class="last">Determine if the server show log message</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_headerOriginRequired">
                                        protected                                        boolean
                </td>
                <td>$headerOriginRequired</td>
                <td class="last">Determine if the origin must be check</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_headerSecWebSocketProtocolRequired">
                                        protected                                        boolean
                </td>
                <td>$headerSecWebSocketProtocolRequired</td>
                <td class="last">Determine if the sec-websocket-protocol must be check</td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_headerSecWebSocketExtensionsRequired">
                                        protected                                        boolean
                </td>
                <td>$headerSecWebSocketExtensionsRequired</td>
                <td class="last">Determine if the sec-websocket-extensions must be check</td>
                <td></td>
            </tr>
            </table>

    
            <h2>Methods</h2>

            <div class="container-fluid underlined">
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method___construct">__construct</a>(string $addr, string $port, array $ssl = [], integer $bufferLength = 2048)
        
                                            <p>Initialize master socket</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_process">process</a>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, array $message)
        
                                            <p>Called immediately when the data is recieved.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_connected">connected</a>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        
                                            <p>Called after the handshake response is sent to the client.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_closed">closed</a>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        
                                            <p>Called after the connection is closed.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_connecting">connecting</a>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        
                                            <p>Handle a connecting user, after the instance of the User is created, but before the handshake has completed.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_openRoom">openRoom</a>(string $name)
        
                                            <p>Called on room open</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_closeRoom">closeRoom</a>(string $name)
        
                                            <p>Called on room close</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_send">send</a>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, array $message)
        
                                            <p>Send event to an user</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_broadcast">broadcast</a>(array $message, string $room = null, string $userFrom = null)
        
                                            <p>Send event to multiple user</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_tick">tick</a>()
        
                                            <p>Happen periodically. Will happen at least once per second, but possibly more often.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method__tick">_tick</a>()
        
                                            <p>Core maintenance processes, such as retrying failed messages.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_run">run</a>()
        
                                            <p>Main processing loop</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_connect">connect</a>(socket_ressource $socket)
        
                                            <p>Connect an user.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_disconnect">disconnect</a>(socket_ressource $socket, boolean $triggerClosed = true, integer $sockErrNo = null)
        
                                            <p>Disconnect an User.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_doHandshake">doHandshake</a>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, string $buffer)
        
                                            <p>Do the handshake client/server</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    boolean
                </div>
                <div class="col-md-8 type">
                    <a href="#method_checkHost">checkHost</a>(String $hostName)
        
                                            <p>Override and return false if the host is not one that you would expect.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    boolean
                </div>
                <div class="col-md-8 type">
                    <a href="#method_checkOrigin">checkOrigin</a>(string $origin)
        
                                            <p>Override and return false if the origin is not one that you would expect.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    boolean
                </div>
                <div class="col-md-8 type">
                    <a href="#method_checkWebsocProtocol">checkWebsocProtocol</a>(string $protocol)
        
                                            <p>Override and return false if a protocol is not found that you would expect.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    boolean
                </div>
                <div class="col-md-8 type">
                    <a href="#method_checkWebsocExtensions">checkWebsocExtensions</a>(string $extensions)
        
                                            <p>Override and return false if an extension is not found that you would expect.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8 type">
                    <a href="#method_processProtocol">processProtocol</a>(string $protocol)
        
                                            <p>Process a protocol</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8 type">
                    <a href="#method_processExtensions">processExtensions</a>(string $extensions)
        
                                            <p>Process extensions</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    <a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_getUserBySocket">getUserBySocket</a>(socket_ressource $socket)
        
                                            <p>Get an user by his socket</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_stdout">stdout</a>(string $message)
        
                                            <p>Log a success message</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_stderr">stderr</a>(string $message)
        
                                            <p>Log a warning message</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8 type">
                    <a href="#method_frame">frame</a>(string $message, <a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, string $messageType = &#039;text&#039;, boolean $messageContinues = false)
        
                                            <p>Create a frame from user message</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_split_packet">split_packet</a>(integer $length, string $packet, <a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        
                                            <p>Check packet if he have more than one frame and process each frame individually</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    integer
                </div>
                <div class="col-md-8 type">
                    <a href="#method_calcoffset">calcoffset</a>(array $headers)
        
                                            <p>Calculate header offset</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    <abbr title="Phalcon\Websocket\[type]">[type]</abbr>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_deframe">deframe</a>(<abbr title="Phalcon\Websocket\[type]">[type]</abbr> $message, <abbr title="Phalcon\Websocket\[type]">[type]</abbr> $user)
        
                                            <p>[deframe description]</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_extractHeaders">extractHeaders</a>($message)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_extractPayload">extractPayload</a>($message, $headers)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_applyMask">applyMask</a>($headers, $payload)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_checkRSVBits">checkRSVBits</a>($headers, $user)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_strtohex">strtohex</a>($str)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_printHeaders">printHeaders</a>($headers)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
            </div>


        <h2>Details</h2>

            <div id="method-details">
                    <div class="method-item">
                    <h3 id="method___construct">
        <div class="location">at         line 81</div>
        <code>                    
    <strong>__construct</strong>(string $addr, string $port, array $ssl = [], integer $bufferLength = 2048)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Initialize master socket</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$addr</td>
                <td>Ip address to listen on</td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$port</td>
                <td>listen port</td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$ssl</td>
                <td>SSL certificate in PEM format</p>

<pre><code>[
    'pem'=&gt;'',
    'crt'=&gt;''
];
</code></pre>
</td>
            </tr>
                    <tr>
                <td>integer</td>
                <td>$bufferLength</td>
                <td>Length of the buffer</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_process">
        <div class="location">at         line 116</div>
        <code>    abstract        protected        
    <strong>process</strong>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, array $message)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Called immediately when the data is recieved.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user  User emitting the event</td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$message</td>
                <td>&amp;$message Data of the event</p>

<pre><code>[
    'type'=&gt;'' // name of the event,
    'data'=&gt;''// data of the event
];
</code></pre>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_connected">
        <div class="location">at         line 122</div>
        <code>    abstract        protected        
    <strong>connected</strong>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Called after the handshake response is sent to the client.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user User connected</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_closed">
        <div class="location">at         line 128</div>
        <code>    abstract        protected        
    <strong>closed</strong>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Called after the connection is closed.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user User socket closed</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_connecting">
        <div class="location">at         line 134</div>
        <code>            protected        
    <strong>connecting</strong>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Handle a connecting user, after the instance of the User is created, but before the handshake has completed.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user User connection</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_openRoom">
        <div class="location">at         line 141</div>
        <code>            protected        
    <strong>openRoom</strong>(string $name)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Called on room open</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$name</td>
                <td>Name of the opened room</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_closeRoom">
        <div class="location">at         line 149</div>
        <code>            protected        
    <strong>closeRoom</strong>(string $name)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Called on room close</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$name</td>
                <td>Name of the opened room</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_send">
        <div class="location">at         line 164</div>
        <code>            protected        
    <strong>send</strong>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, array $message)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Send event to an user</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user  User who will receive the event</td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$message</td>
                <td>&amp;$message Data of the event</p>

<pre><code>[
    'type'=&gt;'' // name of the event,
    'data'=&gt;''// data of the event
];
</code></pre>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_broadcast">
        <div class="location">at         line 191</div>
        <code>            protected        
    <strong>broadcast</strong>(array $message, string $room = null, string $userFrom = null)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Send event to multiple user</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array</td>
                <td>$message</td>
                <td>Data of the event</p>

<pre><code>[
    'type'=&gt;'' // name of the event,
    'data'=&gt;''// data of the event
];
</code></pre>
</td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$room</td>
                <td>Name of the room, if null send to all user's room</td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$userFrom</td>
                <td>Id of an user to exclude to send</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_tick">
        <div class="location">at         line 212</div>
        <code>            protected        
    <strong>tick</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Happen periodically. Will happen at least once per second, but possibly more often.</p>                                                </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method__tick">
        <div class="location">at         line 218</div>
        <code>            protected        
    <strong>_tick</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Core maintenance processes, such as retrying failed messages.</p>                                                </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_run">
        <div class="location">at         line 240</div>
        <code>                    
    <strong>run</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Main processing loop</p>                                                </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_connect">
        <div class="location">at         line 324</div>
        <code>            protected        
    <strong>connect</strong>(socket_ressource $socket)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Connect an user.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>socket_ressource</td>
                <td>$socket</td>
                <td>&amp;$socket User socket</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_disconnect">
        <div class="location">at         line 338</div>
        <code>            protected        
    <strong>disconnect</strong>(socket_ressource $socket, boolean $triggerClosed = true, integer $sockErrNo = null)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Disconnect an User.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>socket_ressource</td>
                <td>$socket</td>
                <td>&amp;$socket  Socket to disconnect</td>
            </tr>
                    <tr>
                <td>boolean</td>
                <td>$triggerClosed</td>
                <td>Set to true if socket need to be closed</td>
            </tr>
                    <tr>
                <td>integer</td>
                <td>$sockErrNo</td>
                <td>Error code, present only on error</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_doHandshake">
        <div class="location">at         line 384</div>
        <code>            protected        
    <strong>doHandshake</strong>(<a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, string $buffer)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Do the handshake client/server</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user  User processing the handshake</td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$buffer</td>
                <td>&amp;$buffer Buffer containing data</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_checkHost">
        <div class="location">at         line 480</div>
        <code>            protected        boolean
    <strong>checkHost</strong>(String $hostName)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Override and return false if the host is not one that you would expect.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>String</td>
                <td>$hostName</td>
                <td>Name of the host to check</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>boolean</td>
            <td>Result of the check</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_checkOrigin">
        <div class="location">at         line 489</div>
        <code>            protected        boolean
    <strong>checkOrigin</strong>(string $origin)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Override and return false if the origin is not one that you would expect.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$origin</td>
                <td>Origin to check</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>boolean</td>
            <td>Result of the check</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_checkWebsocProtocol">
        <div class="location">at         line 498</div>
        <code>            protected        boolean
    <strong>checkWebsocProtocol</strong>(string $protocol)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Override and return false if a protocol is not found that you would expect.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$protocol</td>
                <td>Name of the protocol</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>boolean</td>
            <td>Result of the check</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_checkWebsocExtensions">
        <div class="location">at         line 507</div>
        <code>            protected        boolean
    <strong>checkWebsocExtensions</strong>(string $extensions)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Override and return false if an extension is not found that you would expect.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$extensions</td>
                <td>Extension list</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>boolean</td>
            <td>Result of the check</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_processProtocol">
        <div class="location">at         line 516</div>
        <code>            protected        string
    <strong>processProtocol</strong>(string $protocol)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Process a protocol</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$protocol</td>
                <td>Protocol to process</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td>Either "Sec-WebSocket-Protocol: SelectedProtocolFromClientList\r\n" or return an empty string. The carriage return/newline combo must appear at the end of a non-empty string, and must not appear at the beginning of the string nor in an otherwise empty string, or it will be considered part of the response body, which will trigger an error in the client as it will not be formatted correctly.</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_processExtensions">
        <div class="location">at         line 525</div>
        <code>            protected        string
    <strong>processExtensions</strong>(string $extensions)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Process extensions</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$extensions</td>
                <td>Extensions list</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td>Either "Sec-WebSocket-Extensions: SelectedExtensions\r\n" or return an empty string.</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getUserBySocket">
        <div class="location">at         line 534</div>
        <code>            protected        <a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a>
    <strong>getUserBySocket</strong>(socket_ressource $socket)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Get an user by his socket</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>socket_ressource</td>
                <td>$socket</td>
                <td>User socket to get</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
            <td>Valid user or null if socket not exists</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_stdout">
        <div class="location">at         line 547</div>
        <code>                    
    <strong>stdout</strong>(string $message)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Log a success message</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$message</td>
                <td>Message to display</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_stderr">
        <div class="location">at         line 557</div>
        <code>                    
    <strong>stderr</strong>(string $message)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Log a warning message</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$message</td>
                <td>Message to display</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_frame">
        <div class="location">at         line 571</div>
        <code>            protected        string
    <strong>frame</strong>(string $message, <a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user, string $messageType = &#039;text&#039;, boolean $messageContinues = false)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Create a frame from user message</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$message</td>
                <td>&amp;$message         Message data</td>
            </tr>
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user   User frame</td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$messageType</td>
                <td>Type of message</td>
            </tr>
                    <tr>
                <td>boolean</td>
                <td>$messageContinues</td>
                <td>Determine if the message is finished or not</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td>Formated message</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_split_packet">
        <div class="location">at         line 643</div>
        <code>            protected        
    <strong>split_packet</strong>(integer $length, string $packet, <a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a> $user)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Check packet if he have more than one frame and process each frame individually</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>integer</td>
                <td>$length</td>
                <td>$length of the packet</td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$packet</td>
                <td>Packet content</td>
            </tr>
                    <tr>
                <td><a href="../../Phalcon/Websocket/User.html"><abbr title="Phalcon\Websocket\User">User</abbr></a></td>
                <td>$user</td>
                <td>&amp;$user  User packet</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_calcoffset">
        <div class="location">at         line 686</div>
        <code>            protected        integer
    <strong>calcoffset</strong>(array $headers)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Calculate header offset</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array</td>
                <td>$headers</td>
                <td>&amp;$headers Socket headers</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>integer</td>
            <td>Offset calculated</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_deframe">
        <div class="location">at         line 705</div>
        <code>            protected        <abbr title="Phalcon\Websocket\[type]">[type]</abbr>
    <strong>deframe</strong>(<abbr title="Phalcon\Websocket\[type]">[type]</abbr> $message, <abbr title="Phalcon\Websocket\[type]">[type]</abbr> $user)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>[deframe description]</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Phalcon\Websocket\[type]">[type]</abbr></td>
                <td>$message</td>
                <td>&amp;$message [description]</td>
            </tr>
                    <tr>
                <td><abbr title="Phalcon\Websocket\[type]">[type]</abbr></td>
                <td>$user</td>
                <td>&amp;$user    [description]</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td><abbr title="Phalcon\Websocket\[type]">[type]</abbr></td>
            <td>[description]</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_extractHeaders">
        <div class="location">at         line 773</div>
        <code>            protected        
    <strong>extractHeaders</strong>($message)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td></td>
                <td>$message</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_extractPayload">
        <div class="location">at         line 810</div>
        <code>            protected        
    <strong>extractPayload</strong>($message, $headers)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td></td>
                <td>$message</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$headers</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_applyMask">
        <div class="location">at         line 824</div>
        <code>            protected        
    <strong>applyMask</strong>($headers, $payload)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td></td>
                <td>$headers</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$payload</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_checkRSVBits">
        <div class="location">at         line 841</div>
        <code>            protected        
    <strong>checkRSVBits</strong>($headers, $user)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td></td>
                <td>$headers</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$user</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_strtohex">
        <div class="location">at         line 849</div>
        <code>            protected        
    <strong>strtohex</strong>($str)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td></td>
                <td>$str</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_printHeaders">
        <div class="location">at         line 870</div>
        <code>            protected        
    <strong>printHeaders</strong>($headers)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td></td>
                <td>$headers</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
            </div>

    
            </div>
                <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a>.
    </div>

        </div>
    </div>
    </body>

</html>
